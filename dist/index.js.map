{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../component/src/css/default.less?c0ab","webpack:///../component/src/index.jsx","webpack:///../libs/node_modules/merge/merge.js","webpack:///../libs/node_modules/whatwg-fetch/fetch.js","webpack:///../libs/src/css/default.less","webpack:///../libs/src/index.jsx","webpack:///../libs/src/lib/api/get-headers.js","webpack:///../libs/src/lib/api/index.js","webpack:///../libs/src/lib/local-storage.js","webpack:///../libs/src/lib/session-storage.js","webpack:///../libs/src/lib/user/get-jwt.js","webpack:///../libs/src/lib/user/get-user.js","webpack:///../libs/src/lib/user/index.js","webpack:///../libs/src/lib/user/logout.js","webpack:///../nlmap/src/component/map.jsx","webpack:///../nlmap/src/lib/amaps-cluster-icon.js","webpack:///./node_modules/merge/merge.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./src/component/filterbar.jsx","webpack:///./src/component/idea-details.jsx","webpack:///./src/component/idea-form.jsx","webpack:///./src/component/ideas-list.jsx","webpack:///./src/component/ideas-on-map.jsx","webpack:///./src/component/info-block.jsx","webpack:///./src/component/map.jsx","webpack:///./src/component/openstad-component-formelements/formelement.jsx","webpack:///./src/component/openstad-component-formelements/image-upload.jsx","webpack:///./src/component/openstad-component-formelements/input-with-counter.jsx","webpack:///./src/component/openstad-component-reactions/openstad-component-reaction-form.jsx","webpack:///./src/component/openstad-component-reactions/openstad-component-reaction.jsx","webpack:///./src/component/openstad-component-reactions/openstad-component-reactions.jsx","webpack:///./src/component/search.jsx","webpack:///./src/component/vote-button.jsx","webpack:///./src/css/default.less?2215","webpack:///./src/index.jsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentLibs","api","user","localStorage","sessionStorage","headers","merge","recursive","jwt","getJWT","OpenStadComponentAPI","getHeaders","oscLocalStorage","get","getItem","set","stringify","setItem","remove","removeItem","oscSessionStorage","match","location","search","document","replace","next","console","log","url","siteId","fetch","then","response","ok","Error","json","catch","OpenStadComponentUser","getUser","logout","OpenStadComponentNLMap","defaultConfig","target","style","marker","center","latitude","longitude","zoom","zoomposition","disableDefaultUI","polygon","autoZoomAndCenter","assign","_loadedFiles","files","type","href","src","variant","push","markers","loadNextFile","createMap","event","Event","mapIsReady","instance","dispatchEvent","file","element","createElement","async","rel","onload","appendChild","length","map","amaps","nlmaps","clustering","isActive","L","markerClusterGroup","iconCreateFunction","amapsCreateClusterIcon","bind","createClusterIcon","eval","showCoverageOnHover","maxClusterRadius","onClusterClick","on","onClusterAnimationEnd","addLayer","onMapClick","createCutoutPolygon","addMarker","centerOn","editorMarker","position","setBoundsAndCenter","markerData","icon","lat","lng","visible","data","doNotCluster","onClick","onMarkerClick","index","indexOf","splice","removeLayer","newData","newLatLng","LatLng","setLatLng","cluster","count","getChildCount","divIcon","html","className","iconSize","point","iconAnchor","bounds","getBounds","getCenter","smallest","i","y","sin","cos","x","bearing","atan2","PI","a","slice","b","concat","delta1","delta2","outerBox","polygonStyle","result","points","poly","_latlng","coordinates","panTo","latLngBounds","fitBounds","showMarker","addTo","hideMarker","filterFuntion","filterFunction","applyFilter","j","inPoly","latlng","bagApiUrl1","bagApiUrl2","results","landelijk_id","el","typeField","types","getAllChildMarkers","colors","total","isFaded","entry","tmp","find","color","undefined","soFar","myColor","perc","angle","Filterbar","areas","state","selectedType","selectedArea","mobileActiveSelector","setState","hideMobileActiveSelector","CustomEvent","detail","area","handleTypeChange","handleAreaChange","which","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","typeSelector","resetTypeAndArea","resetButton","IdeasDetails","ideaId","isUserLoggedIn","argument","descriptionMinLength","descriptionMaxLength","formIntro","placeholder","requiredUserRole","idea","storedListener","onReactionStored","addEventListener","deletedListener","onReactionDeleted","fetchData","removeEventListener","e","stopPropagation","argCount","hash","role","method","labelHTML","labels","label","backgroundColor","text","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","titleField","backgroundImage","image","encodeURIComponent","opinion","yes","nickName","fullName","firstName","lastName","createDateHumanized","extraData","theme","summary","description","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","formfields","title","userWhat","userAge","images","handleFieldChange","dispatchUpdateEditIdea","display","address","isValid","validate","summaryField","descriptionField","imageField","validateIdea","showFormErrorsWarning","alert","body","input","inputType","minLength","maxLength","modBreakField","formErrorsWarningHTML","themeField","infoText","userWhatField","userAgeField","submitIdea","submitButton","IdeasList","sortOptions","showSortButton","defaultSortOrder","onIdeaClick","currentSortOrder","ideas","sortOrder","sort","ranking","Date","createdAt","getTime","_distance","sqrt","pow","updateIdeas","sortSelector","setSortOrder","option","height","titleHML","typeDef","listicon","__html","OpenStadComponentIdeasOnMap","appTitle","currentPolygon","areaField","doSearchFunction","doSearch","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","onChangeMapBoundaries","onChangeTypeFilter","onChangeAreaFilter","onUpdateSelectedIdea","onCloseSelectedLocation","onUpdateEditIdea","onSelectedIdeaClick","onNewIdeaClick","onClickMobileSwitcher","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaDetails","showIdeaSelected","removeMarker","filter","posterImage","addIdea","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","hideMarkers","exception","searchValue","callback","searchValueLc","toLowerCase","searchResult","locations","titlelLc","summaryLc","docs","found","weergavenaam","onClickAddress","centroide_ll","removePolygon","getVisibleIdeas","setSelectedLocation","ideaform","handleLocationChange","getPointInfo","_display","isPointInPolygon","fadeMarkers","infoblock","unfadeAllMarkers","forceSelectLocation","newIdea","updateFading","querySelector","scrollTo","showIdeaForm","change","setTimeout","setFilter","removeCurrentPolygon","setCurrentPolygon","infoHTML","filterHTML","mobilePopupHTML","Kans","Knelpunt","ideadetails","hideIdeaDetails","hideIdeaForm","buttonHTML","newIdeaButton","filterbar","InfoBlock","eventTarget","list","newIdeaHTML","selectedIdeaHTML","titleAddition","mobileSwitcherHTML","mobileTitle","button","dispatchNewIdeaClick","dispatchCloseSelectedLocation","dispatchSelectedIdeaClick","dispatchUpdateSelectedIdea","defaultBlockHTML","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Map","typename","icondef","mapicon","img","width","anchor","contains","getLatLng","selectedLocationMarker","updateMarker","visibleParent","getVisibleParent","ignore","m","setOpacity","OpenStadComponentFormelement","minChars","maxChars","elementHTML","charsCounterHTML","OpenStadComponentImageUpload","imageuploader","getFiles","serverId","fileUploaderInit","fieldsetElement","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","setOptions","server","filePondSettings","acceptedFileTypes","allowFileSizeValidation","maxFileSize","maxFiles","allowBrowse","process","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","fileUploaderUpdateCurrentInput","error","addFiles","inputElement","OpenStadComponentFormfieldsInputWithCounter","focused","valueLength","onChange","warning","showWarning","counter","inputHTML","disabled","handleOnChange","handleInputKeyUp","handleInputFocus","handleInputBlur","OpenStadComponentReactions","argumentId","userRole","sentiment","onSubmit","messages","submitButtonHTML","submitForm","OpenStadComponentReaction","userId","hasUserVoted","can","reactions","isMenuActive","editMode","what","isDeleted","menuHTML","edit","delete","showMenu","submitDelete","showEditForm","likeButtonHTML","descriptionHTML","editForm","reaction","handleOnSubmit","Search","doSearchx","showSuggestions","updateSearchValue","updateSearchResult","inputfield","focus","suggestionsHTML","suggestions","RegExp","$0","onSuggestionClick","handleChange","hideSuggestions","handleButtonClick","VoteButton","busy","votePending","doVote","loginUrl","userVote","message","value000","value00","value0","NodeList","prototype","Array","elements","querySelectorAll","elem","ReactDOM","render"],"mappings":"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AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;;AAEO;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACngBA,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;;AAEO;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACngBA;AACA;AAEA;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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.jsx\");\n","// extracted by mini-css-extract-plugin","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n    self.config = self.config || props.config;\n\n    if (self.config) {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = this;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\nimport 'openstad-component/src/css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from 'openstad-component/src/index.jsx';\n// import initSingleClick from '../lib/singleclick.js';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t\t// onQueryResult: self.onQueryHandler\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tvar event = new Event('mapIsReady');\n\t\t\tself.mapIsReady = true;\n\t\t\tself.instance.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap(self.config);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t  let onClusterClick = self.config.clustering.onClusterClick || self.onClusterClick;\n\t\t\tif (typeof onClusterClick == 'string') onClusterClick = eval(onClusterClick);\n\t\t\tself.markerClusterGroup.on('clusterclick', onClusterClick);\n\t\t  let onClusterAnimationEnd = self.config.clustering.onClusterAnimationEnd || self.onClusterAnimationEnd;\n\t\t\tif (typeof onClusterAnimationEnd == 'string') onClusterAnimationEnd = eval(onClusterAnimationEnd);\n\t\t\tself.markerClusterGroup.on('animationend', onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tif (self.config.onMapClick) {\n\t\t\tif (typeof self.config.onMapClick == 'string') self.config.onMapClick = eval(self.config.onMapClick);\n\t\t}\n\t\t// self.map.on('singleclick', self.config.onMapClick || self.onMapClick);\n\t\tself.map.on('click', self.config.onMapClick || self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = (markerData.onClick != null && markerData.onClick) || self.config.onMarkerClick || self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n    console.log(polygon.length);\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\t  points = points || [];\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var i;\n    var j = polygon.length - 1;\n\t  \n    var inPoly=false;\n\n\t  var lat = point.lat;\n    var lng = point.lng;\n\n    for (i=0; i<polygon.length; i++) {\n\n      if ( polygon[i].lng < lng && polygon[j].lng >= lng || polygon[j].lng < lng && polygon[i].lng >= lng) {\n        if ( polygon[i].lat + ( lng - polygon[i].lng ) / ( polygon[j].lng - polygon[i].lng ) * ( polygon[j].lat -  polygon[i].lat ) < lat) {\n          inPoly=!inPoly; \n        }\n      }\n      j=i; \n    }\n    return inPoly; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick() {\n    // placeholder\n  }\n\n\tonMarkerClick() {\n    // placeholder\n  }\n\n\tonClusterClick() {\n    // placeholder\n  }\n\n\tonClusterAnimationEnd() {\n    // placeholder\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n\n  if (self.config.typeField && self.config.types && self.config.types.length) {\n    \n    // todo: configurable\n    let count = cluster.getChildCount();\n    let markers = cluster.getAllChildMarkers();\n\n    let colors = {}\n    let total = markers.length;\n    let isFaded = false;\n    markers.forEach((entry) => {\n      let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n      let tmp = self.config.types.find(entry => entry.name == type);\n      let color = tmp && tmp.color || 'black';\n      if ( type == undefined ) type = 'undef'\n      if ( !colors[color] ) colors[color] = 0;\n      colors[color]++;\n      if (entry.data && entry.data.isFaded) isFaded = true;\n    });\n\n    let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n    let soFar = 0;\n    Object.keys(colors).forEach((key) => {\n      let myColor = key;\n      let perc = 100 * colors[key] / total;\n      let angle = (soFar / 100) * 360;\n      \n      html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n      soFar = soFar + perc;\n    });\n\n    html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n    return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n  } else {\n\n\t\treturn L.divIcon({ html: count, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\n\t}\n\n}\n","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      areas: ( props.config && props.config.areas ) || [],\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t\t  <Search config={{ ...this.config }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n\n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">Alle thema's</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i}>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// TODO: dit moet een eigen repo worden\n\nimport merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponentLibs from 'openstad-component-libs/src/index.jsx';\nimport OpenStadComponentReactions from './openstad-component-reactions/openstad-component-reactions.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      user: {},\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      argument: {\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n      },\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.storedListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('reactionStored', self.storedListener);\n\t\tself.deletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('reactionDeleted', self.deletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('reactionStored', this.storedListener);\n\t\tdocument.removeEventListener('reactionDeleted', this.deletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('editIdeaClick', { detail: this.state.idea });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchDeleteIdeaClick(e) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('deleteIdeaClick', { detail: this.state.idea });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  onReactionStored(data) {\n    this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  fetchData() {\n\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }?includeVoteCount=1&includeArguments=1&includeUser=1&includeUserVote=1`;\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        self.setState({ idea: json }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n\t\t    var event = new CustomEvent('ideaDeleted', { detail: { ideaId } });\n\t\t    document.dispatchEvent(event);\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n\n    let labelHTML = null;\n    if (self.config.labels && self.props.label) {\n      console.log(self.config.labels[ self.props.label ]);\n      labelHTML = (\n        <div className=\"ocs-idea-label\" style={{ color: self.config.labels[ self.props.label ].color, backgroundColor: self.config.labels[ self.props.label ].backgroundColor }}>{self.config.labels[ self.props.label ].text}</div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( self.config.user && self.config.user.role && self.config.user.role == 'admin' ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (self.props.idea.modBreak) {\n      console.log(self.props.idea);\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {self.props.idea.modBreakDateHumanized}<br/>\n          <br/>\n          {self.props.idea.modBreak}\n        </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`self.props.idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${self.props.idea.image})` }}></div>\n\n              {labelHTML}\n\n              <div className=\"osc-details-sharebuttons\">\n                <ul>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`self.props.idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>\n\t\t\t\t\t\t    </ul>\n              </div>\n\n              <div className=\"osc-details-stats\">\n\n                <h3>Likes</h3>\n                <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={self.props.idea.yes}/>\n\n                <br/>\n\n                <h3>Reacties</h3>\n                <a href=\"#reactions\" className=\"osc-no-of-reactions\">{self.props.idea.argCount || 0} reacties</a>\n\n                {editButtonsHTML}\n\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              <span className=\"ocs-gray-text\">Door </span>{self.props.idea.user.nickName || self.props.idea.user.fullName || self.props.idea.user.firstName +' ' + self.props.idea.user.lastName}\n              <span className=\"ocs-gray-text\"> op </span>{self.props.idea.createDateHumanized}\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span>\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">Thema: </span>{self.props.idea.extraData.theme}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{self.props.idea.summary}</p>\n\n            <p className=\"osc-details-description\">{self.props.idea.description}</p>\n\n\t\t\t    </div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>Reacties</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: self.props.idea.id }}/>\n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\nimport OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n    };\n\n    // todo: normaal oplossen\n\t\tthis.config = Object.assign(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      formfields: {\n        id: this.props.idea.id || '',\n        title: this.props.idea.title || '',\n        summary: this.props.idea.summary || '',\n        description: this.props.idea.description || '',\n        type: this.props.idea.extraData && this.props.idea.extraData.type || '',\n        theme: this.props.idea.extraData && this.props.idea.extraData.theme || '',\n  \t\t\tuserWhat: this.props.idea.extraData && this.props.idea.extraData['userWhat'],\n  \t\t\tuserAge: this.props.idea.extraData && this.props.idea.extraData['userAge'],\n        images: this.props.idea.extraData && this.props.idea.extraData.images || [],\n        modBreak: this.props.idea.modBreak || '',\n        user: this.props.idea.user || {},\n      },\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleFieldChange(name, value) {\n    let state = { ...this.state };\n    state.formfields[name] = value;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n\n\t  // tmp: type\n\t  if (name == 'type') {\n      if (this.state.formfields['type']) {\n\t\t    this['form-warning-type'].style.display = 'none';\n\t    }\n\t  }\n\n\t  // tmp: theme\n\t  if (name == 'theme') {\n      if (this.state.formfields['theme']) {\n\t\t    this['form-warning-theme'].style.display = 'none';\n\t    }\n\t  }\n\n\t  // tmp: userWhat\n\t  if (name == 'userWhat') {\n\t    if (this.state.formfields['userWhat']) {\n\t\t    this['form-warning-userWhat'].style.display = 'none';\n\t    }\n\t  }\n\n\t  // tmp: userAge\n\t  if (name == 'userAge') {\n\t    if (this.state.formfields['userAge']) {\n\t\t    this['form-warning-userAge'].style.display = 'none';\n\t    }\n\t  }\n\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  \n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // title\n\t  if (!self.titleField.validate()) {\n\t\t  isValid = false;\n\t  }\n\n\t  // summary\n\t  if (!self.summaryField.validate()) {\n\t\t  isValid = false;\n\t  }\n\n\t  // description\n\t  if (!self.descriptionField.validate()) {\n\t\t  isValid = false;\n\t  }\n\n\t  // type\n\t  if (!self.state.formfields['type']) {\n\t\t  self['form-warning-type'].style.display = 'block';\n\t\t  isValid = false;\n\t  } else {\n\t\t  self['form-warning-type'].style.display = 'none';\n\t  }\n\n\t  // theme\n\t  if (!self.state.formfields['theme']) {\n\t\t  self['form-warning-theme'].style.display = 'block';\n\t\t  isValid = false;\n\t  } else {\n\t\t  self['form-warning-theme'].style.display = 'none';\n\t  }\n\n\t  // userWhat\n\t  if (!self.state.formfields['userWhat']) {\n\t\t  self['form-warning-userWhat'].style.display = 'block';\n\t\t  isValid = false;\n\t  } else {\n\t\t  self['form-warning-userWhat'].style.display = 'none';\n\t  }\n\n\t  // userAge\n\t  if (!self.state.formfields['userAge']) {\n\t\t  self['form-warning-userAge'].style.display = 'block';\n\t\t  isValid = false;\n\t  } else {\n\t\t  self['form-warning-userAge'].style.display = 'none';\n\t  }\n\n\t  // images\n\t  if (!self.imageField.validate()) {\n\t\t  self['form-warning-image'].style.display = 'block';\n\t\t  isValid = false;\n\t  } else {\n\t\t  self['form-warning-image'].style.display = 'none';\n    }\n\n\t  // time ?\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    var self = this;\n\n\t  if ( !self.validateIdea() ) {\n      self.setState({ showFormErrorsWarning: true });\n      return;\n    }\n\n    self.setState({ showFormErrorsWarning: false });\n\n\t  if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t  var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n\n\t  var body = {\n\t\t\ttitle: self.state.formfields['title'],\n\t\t\tsummary: self.state.formfields['summary'],\n\t\t\tdescription: self.state.formfields['description'],\n      location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n\t\t\textraData: {\n\t\t\t\ttype: self.state.formfields['type'],\n\t\t\t\ttheme: self.state.formfields['theme'],\n  \t\t\timages: self.state.formfields['images'],\n  \t\t\tuserWhat: self.state.formfields['userWhat'],\n  \t\t\tuserAge: self.state.formfields['userAge'],\n\t\t\t},\n\t  }\n\n    if ( self.config.user && self.config.user.role == 'admin' ) {\n      body.modBreak = self.state.formfields['modBreak'];\n    }\n\n    let method = 'POST';\n    if (typeof this.state.formfields.id == 'number') {\n      method = 'PUT';\n      url = url + '/' + this.state.formfields.id;\n    }\n\n    fetch(url, {\n      method,\n      headers,\n      body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n    })\n      .then((response) => {\n        if (!response.ok) throw Error(response)\n        return response.json();\n      })\n      .then( json => {\n\t\t    var event = new CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t    document.dispatchEvent(event);\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n  \n\trender() {\n\n    let self = this;\n\n    let modBreakHTML = null\n    if (self.config.user && self.config.user.role == 'admin') {\n      modBreakHTML = (\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Moderator reactie\n\t\t\t\t\t  </h2>\n\t\t\t\t    <OpenStadComponentFormelementsInputWithCounter ref={el => (self.input = el)} config={{ name: \"modBreak\", inputType: 'textarea', minLength: 0, maxLength: 2000 }} value={this.state.formfields.modBreak} onChange={(data) => self.handleFieldChange('modBreak', data.value)} ref={el => (self.modBreakField = el)}/>\n          </div>\n      );\n    }\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">\n          Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.\n        </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Titel\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n\t\t\t\t\t\t  Geef uw inzending een duidelijke naam, zodat anderen deze gemakkelijk kunnen vinden en direct snappen waar het over gaat.\n\t\t\t\t\t  </div>\n\t\t\t\t    <OpenStadComponentFormelementsInputWithCounter ref={el => (self.input = el)} config={{ name: \"titel\", minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength }} value={this.state.formfields.title} onChange={(data) => self.handleFieldChange('title', data.value)} ref={el => (self.titleField = el)}/>\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Gaat dit goed of kan dit beter?\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n\t\t\t\t\t\t  Wilt u deze inzending bestempelen als iets dat goed gaat of iets dat beter kan in de buurt?\n\t\t\t\t\t  </div>\n            <select className=\"osc-default-select\" value={this.state.formfields.type} onChange={() => self.handleFieldChange('type', self.typeField.value)} ref={el => (self.typeField = el)}>\n              <option value=\"\">Maak een keuze</option>\n              <option value=\"Kans\">Dit gaat goed</option>\n              <option value=\"Knelpunt\">Dit kan beter</option>\n            </select>\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-type'] = el  }>Je hebt nog geen keuze gemaakt</div>\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Thema\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n\t\t\t\t\t\t  Onder welk thema valt uw inzending?\n\t\t\t\t\t  </div>\n            <select className=\"osc-default-select\" value={this.state.formfields.theme} onChange={() => self.handleFieldChange('theme', self.themeField.value)} ref={el => (self.themeField = el)}>\n              <option value=\"\">Maak een keuze</option>\n              <option value=\"Auto\">Auto</option>\n              <option value=\"Fiets\">Fiets</option>\n              <option value=\"Voetganger\">Voetganger</option>\n              <option value=\"Recreren\">Recreren</option>\n              <option value=\"Schoon\">Schoon</option>\n              <option value=\"Groen\">Groen</option>\n              <option value=\"Geluid\">Geluid</option>\n              <option value=\"Overig\">Overig</option>\n            </select>\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-theme'] = el  }>Je hebt geen thema geseleceteerd</div>\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Samenvatting\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n              Geef hier eerst een korte samenvatting. In de volgende stap heeft u ruimte om uw inzending uitgebreider toe te lichten.\n\t\t\t\t\t  </div>\n\t\t\t\t    <OpenStadComponentFormelementsInputWithCounter ref={el => (self.input = el)} config={{ name: \"samenvatting\", inputType: 'textarea', minLength: self.config.summaryMinLength, maxLength: self.config.summaryMaxLength }} value={this.state.formfields.summary} onChange={(data) => self.handleFieldChange('summary', data.value)} ref={el => (self.summaryField = el)}/>\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Beschrijving\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n\t\t\t\t\t\t  Gebruik de ruimte hieronder om uw inzending uitgebreider te beschrijven.\n\t\t\t\t\t  </div>\n\t\t\t\t    <OpenStadComponentFormelementsInputWithCounter ref={el => (self.input = el)} config={{ name: \"bechrijving\", inputType: 'textarea', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength }} value={this.state.formfields.description} onChange={(data) => self.handleFieldChange('description', data.value)} ref={el => (self.descriptionField = el)}/>\n          </div>\n\n          <div className=\"osc-form-group\">\n            <OpenStadComponentImageUpload config={{ title: 'Afbeeldingen', infoText: 'Let op: Stuur alleen een foto in die u zelf gemaakt heeft. Fotos van anderen kunnen auteursrechtelijk beschermd zijn. U heeft toestemming nodig van de fotograaf om die foto te uploaden.' }} name=\"images\" value={this.state.formfields.title} handleFieldChange={self.handleFieldChange} ref={el => (self.imageField = el)}/>\n\t\t\t\t    <div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-image'] = el  }>Afbeelding upload is nog niet afgerond</div>\n          </div>\n\n          <br/>\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n\t\t\t\t\t\t  Wilt u ons helpen?\n\t\t\t\t\t  </h2>\n\t\t\t\t\t  <div className=\"osc-form-info\">\n\t\t\t\t\t\t  We willen graag weten of we alle doelgroepen in de buurt bereiken. Daarom vragen we u of u in de buurt woont of werkt, of de buurt regelmatig bezoekt, en in welke leeftijdscategorie u valt. Wilt u dit liever niet delen? Kies dan de optie 'Zeg ik liever niet'.\n\t\t\t\t\t  </div>\n\t\t\t\t\t  <h4>\n\t\t\t\t\t\t  Woont of werkt u in de buurt?\n\t\t\t\t\t  </h4>\n            <select className=\"osc-default-select\" value={this.state.formfields.userWhat} onChange={() => self.handleFieldChange('userWhat', self.userWhatField.value)} ref={el => (self.userWhatField = el)}>\n              <option value=\"\">Maak een keuze</option>\n              <option value=\"Ik woon in de buurt\">Ik woon in de buurt</option>\n              <option value=\"Ik werk in de buurt\">Ik werk in de buurt</option>\n              <option value=\"Ik ben een bezoeker van de buurt\">Ik ben een bezoeker van de buurt</option>\n              <option value=\"Anders\">Anders</option>\n              <option value=\"Zeg ik liever niet\">Zeg ik liever niet</option>\n            </select>\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-userWhat'] = el  }>Je hebt nog geen keuze gemaakt</div>\n          </div>\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h4>\n\t\t\t\t\t\t  Wat is uw leeftijd?\n\t\t\t\t\t  </h4>\n            <select className=\"osc-default-select\" value={this.state.formfields.userAge} onChange={() => self.handleFieldChange('userAge', self.userAgeField.value)} ref={el => (self.userAgeField = el)}>\n              <option value=\"\">Maak een keuze</option>\n              <option value=\"Jonger dan 18\">Jonger dan 18</option>\n              <option value=\"18 - 24\">18 - 24</option>\n              <option value=\"25 - 50\">25 - 50</option>\n              <option value=\"51 - 65\">51 - 65</option>\n              <option value=\"65+\">65+</option>\n              <option value=\"Zeg ik liever niet\">Zeg ik liever niet</option>\n            </select>\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-userAge'] = el  }>Je hebt nog geen keuze gemaakt</div>\n          </div>\n\n          {modBreakHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className=\"osc-button osc-button-blue\" onClick={() => self.submitIdea()} ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      titleField: 'title',\n      summaryField: 'summary',\n      // sortOptions: [{ value: 'random', name: 'Random' }, { value: 'ranking', name: 'Ranking' }, { value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }, { value: 'distance', name: 'Afstand' }],\n      sortOptions: [{ value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }],\n      showSortButton: true,\n      defaultSortOrder: 'newest',\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      showSortButton: this.config.showSortButton,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton = this.state.showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'ranking':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - a.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'newest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'oldest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.showSortButton = showSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.state.showSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.name }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme);\n          if (!typeDef) { typeDef = { listicon: { html: '' } }; console.log(idea.extraData.theme + ' niet gevonden'); }\n          return (\n            <div className=\"osc-info-block-ideas-list-idea\" onClick={(event) => self.config.onIdeaClick(event, idea)} key={'info-block-' + i}>\n              <div className=\"osc-content\">\n                <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                <div className=\"osc-likes\">\n                  {idea.yes || 0}\n                </div>\n                <div className=\"osc-reactions\">\n                  {idea.argCount || 0}\n                </div>\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBlock from './info-block.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport IdeaDetails from './idea-details.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponentLibs from 'openstad-component-libs/src/index.jsx';\nimport OpenStadComponent from 'openstad-component/src/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n\t\t\ttitle: this.config.appTitle || 'Inzendingen',\n      currentPolygon: undefined,\n      types: [\n        {\"name\":\"Auto\",\"color\":\"#EC0000\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#EC0000\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0 C26.3917,0 34,7.53433 34,16.8347 C34,29.5249 19.3587,42.4714 18.7259,42.9841 L17,44.4938 L15.2741,42.9841 C14.6413,42.4714 0,29.5249 0,16.8347 C0,7.53575 7.60829,0 17,0 Z\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M22,19.5 C23.0355,19.5 23.875,20.3395 23.875,21.375 C23.875,22.4105 23.0355,23.25 22,23.25 C20.9645,23.25 20.125,22.4105 20.125,21.375 C20.125,20.3395 20.9645,19.5 22,19.5 Z M11.375,19.5 C12.4105,19.5 13.25,20.3395 13.25,21.375 C13.25,22.4105 12.4105,23.25 11.375,23.25 C10.3395,23.25 9.5,22.4105 9.5,21.375 C9.5,20.3395 10.3395,19.5 11.375,19.5 Z M18.875,11.375 L23.25,15.75 L27,15.75 L27,21.375 L25.125,21.375 C25.125,19.6491 23.7259,18.25 22,18.25 C20.2741,18.25 18.875,19.6491 18.875,21.375 L14.5,21.375 C14.5,19.6491 13.1009,18.25 11.375,18.25 C9.64911,18.25 8.25,19.6491 8.25,21.375 L7,21.375 L7,15.75 L11.375,11.375 L18.875,11.375 Z M18.25,12.625 L15.125,12.625 L15.125,15.75 L21.3512,15.75 L18.25,12.625 Z M13.875,12.625 L12,12.625 L8.875,15.75 L13.875,15.75 L13.875,12.625 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#EC0000\\\" fill-rule=\\\"nonzero\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M22,19.5 C23.0355,19.5 23.875,20.3395 23.875,21.375 C23.875,22.4105 23.0355,23.25 22,23.25 C20.9645,23.25 20.125,22.4105 20.125,21.375 C20.125,20.3395 20.9645,19.5 22,19.5 Z M11.375,19.5 C12.4105,19.5 13.25,20.3395 13.25,21.375 C13.25,22.4105 12.4105,23.25 11.375,23.25 C10.3395,23.25 9.5,22.4105 9.5,21.375 C9.5,20.3395 10.3395,19.5 11.375,19.5 Z M18.875,11.375 L23.25,15.75 L27,15.75 L27,21.375 L25.125,21.375 C25.125,19.6491 23.7259,18.25 22,18.25 C20.2741,18.25 18.875,19.6491 18.875,21.375 L14.5,21.375 C14.5,19.6491 13.1009,18.25 11.375,18.25 C9.64911,18.25 8.25,19.6491 8.25,21.375 L7,21.375 L7,15.75 L11.375,11.375 L18.875,11.375 Z M18.25,12.625 L15.125,12.625 L15.125,15.75 L21.3512,15.75 L18.25,12.625 Z M13.875,12.625 L12,12.625 L8.875,15.75 L13.875,15.75 L13.875,12.625 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Fiets\",\"color\":\"#BED200\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#BED200\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.493652 C26.3917,0.493652 34,8.02798 34,17.3284 C34,30.0185 19.3587,42.965 18.7259,43.4778 L17,44.9875 L15.2741,43.4778 C14.6413,42.965 0,30.0185 0,17.3284 C0,8.0294 7.60829,0.493652 17,0.493652 Z\\\"/>    <g fill=\\\"#000\\\" transform=\\\"translate(7 7)\\\">      <path fill-rule=\\\"nonzero\\\" d=\\\"M4.0625 12.3687C6.3062 12.3687 8.125 14.1875 8.125 16.4312 8.125 18.6748 6.3062 20.4937 4.0625 20.4937 1.81884 20.4937 0 18.6748 0 16.4312 0 14.1875 1.81884 12.3687 4.0625 12.3687zM4.0625 13.6187C2.5092 13.6187 1.25 14.8779 1.25 16.4312 1.25 17.9845 2.5092 19.2437 4.0625 19.2437 5.6158 19.2437 6.875 17.9845 6.875 16.4312 6.875 14.8779 5.6158 13.6187 4.0625 13.6187zM15.9375 12.3687C18.1812 12.3687 20 14.1875 20 16.4312 20 18.6748 18.1812 20.4937 15.9375 20.4937 13.6938 20.4937 11.875 18.6748 11.875 16.4312 11.875 14.1875 13.6938 12.3687 15.9375 12.3687zM15.9375 13.6187C14.3842 13.6187 13.125 14.8779 13.125 16.4312 13.125 17.9845 14.3842 19.2437 15.9375 19.2437 17.4908 19.2437 18.75 17.9845 18.75 16.4312 18.75 14.8779 17.4908 13.6187 15.9375 13.6187z\\\"/>      <path d=\\\"M13.75 5.4937L13.75 7.9937 16.875 7.9937 16.875 10.4937 12.5 10.4937 11.25 9.2437 11.25 7.3687 8.75 9.8687 11.252 12.3687 11.252 19.2437 8.75 19.2437 8.75 13.6187 5.625 10.4937 5.625 8.6187 10 4.2437C10.625 3.6187 11.875 3.6187 12.5 4.2437L13.75 5.4937zM15.7008 1.04262C16.4331 1.77492 16.4331 2.96198 15.7008 3.6943 14.9685 4.4266 13.7815 4.4266 13.0492 3.6943 12.3169 2.96198 12.3169 1.77492 13.0492 1.04262 13.7815.31032 14.9685.31032 15.7008 1.04262z\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#BED200\\\" fill-rule=\\\"nonzero\\\"/>    <g fill=\\\"#000\\\" transform=\\\"translate(7 5)\\\">      <path fill-rule=\\\"nonzero\\\" d=\\\"M4.0625 12.3687C6.3062 12.3687 8.125 14.1875 8.125 16.4312 8.125 18.6748 6.3062 20.4937 4.0625 20.4937 1.81884 20.4937 0 18.6748 0 16.4312 0 14.1875 1.81884 12.3687 4.0625 12.3687zM4.0625 13.6187C2.5092 13.6187 1.25 14.8779 1.25 16.4312 1.25 17.9845 2.5092 19.2437 4.0625 19.2437 5.6158 19.2437 6.875 17.9845 6.875 16.4312 6.875 14.8779 5.6158 13.6187 4.0625 13.6187zM15.9375 12.3687C18.1812 12.3687 20 14.1875 20 16.4312 20 18.6748 18.1812 20.4937 15.9375 20.4937 13.6938 20.4937 11.875 18.6748 11.875 16.4312 11.875 14.1875 13.6938 12.3687 15.9375 12.3687zM15.9375 13.6187C14.3842 13.6187 13.125 14.8779 13.125 16.4312 13.125 17.9845 14.3842 19.2437 15.9375 19.2437 17.4908 19.2437 18.75 17.9845 18.75 16.4312 18.75 14.8779 17.4908 13.6187 15.9375 13.6187z\\\"/>      <path d=\\\"M13.75 5.4937L13.75 7.9937 16.875 7.9937 16.875 10.4937 12.5 10.4937 11.25 9.2437 11.25 7.3687 8.75 9.8687 11.252 12.3687 11.252 19.2437 8.75 19.2437 8.75 13.6187 5.625 10.4937 5.625 8.6187 10 4.24365C10.625 3.61865 11.875 3.61865 12.5 4.24365L13.75 5.4937zM15.7008 1.04262C16.4331 1.77492 16.4331 2.96198 15.7008 3.69427 14.9685 4.42657 13.7815 4.42657 13.0492 3.69427 12.3169 2.96198 12.3169 1.77492 13.0492 1.04262 13.7815.31032 14.9685.31032 15.7008 1.04262z\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Voetganger\",\"color\":\"#009DEC\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#009DEC\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.987793 C26.3917,0.987793 34,8.52212 34,17.8225 C34,30.5127 19.3587,43.4592 18.7259,43.9719 L17,45.4816 L15.2741,43.9719 C14.6413,43.4592 0,30.5127 0,17.8225 C0,8.52354 7.60829,0.987793 17,0.987793 Z\\\"/>    <g fill=\\\"#FFF\\\" transform=\\\"translate(10 7)\\\">      <polygon points=\\\"8.25 5.988 10.75 8.488 13.25 8.488 13.25 10.988 10.125 10.988 8.25 9.113 8.25 12.238 10.75 14.738 10.75 20.988 8.25 20.988 8.25 15.988 7 14.738 7 16.613 4.5 19.113 .75 19.113 .75 16.613 3.25 16.613 4.5 15.363 4.5 9.113 3.25 10.363 3.25 12.863 .75 12.863 .75 9.738 4.5 5.988\\\"/>      <path d=\\\"M6.375,0.98779 C7.4106,0.98779 8.25,1.82717 8.25,2.86279 C8.25,3.8984 7.4106,4.7378 6.375,4.7378 C5.3394,4.7378 4.5,3.8984 4.5,2.86279 C4.5,1.82717 5.3394,0.98779 6.375,0.98779 Z\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#009DEC\\\" fill-rule=\\\"nonzero\\\"/>    <g fill=\\\"#FFF\\\" transform=\\\"translate(10 6)\\\">      <polygon points=\\\"8.25 5.988 10.75 8.488 13.25 8.488 13.25 10.988 10.125 10.988 8.25 9.113 8.25 12.238 10.75 14.738 10.75 20.988 8.25 20.988 8.25 15.988 7 14.738 7 16.613 4.5 19.113 .75 19.113 .75 16.613 3.25 16.613 4.5 15.363 4.5 9.113 3.25 10.363 3.25 12.863 .75 12.863 .75 9.738 4.5 5.988\\\"/>      <path d=\\\"M6.375,0.98779 C7.4106,0.98779 8.25,1.82717 8.25,2.86279 C8.25,3.89842 7.4106,4.7378 6.375,4.7378 C5.3394,4.7378 4.5,3.89842 4.5,2.86279 C4.5,1.82717 5.3394,0.98779 6.375,0.98779 Z\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Recreren\",\"color\":\"#E50082\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#E50082\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.481445 C26.3917,0.481445 34,8.01577 34,17.3162 C34,30.0063 19.3587,42.9528 18.7259,43.4656 L17,44.9753 L15.2741,43.4656 C14.6413,42.9528 0,30.0063 0,17.3162 C0,8.0172 7.60829,0.481445 17,0.481445 Z\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M23.875,24.9814 L26.375,24.9814 L26.375,27.4814 L7.625,27.4814 L7.625,24.9814 L10.1254,24.9814 L10.1254,23.1069 L9.5,20.7588 L10.7125,20.4551 L11.2194,22.4819 L13.25,22.4819 C13.595,22.4819 13.875,22.7619 13.875,23.1069 L13.875,24.9814 L15.75,24.9814 L15.75,18.7314 L7.625,18.7314 L7.625,13.7313 L16.9988,8.10645 L26.375,13.7313 L26.375,18.7314 L18.25,18.7314 L18.25,24.9814 L20.125,24.9814 L20.125,23.1069 C20.125,22.7619 20.405,22.4819 20.75,22.4819 L22.7619,22.4819 L23.2687,20.4551 L24.4813,20.7588 L23.875,23.1069 L23.875,24.9814 Z M22.625,24.9814 L22.625,23.7319 L21.375,23.7319 L21.375,24.9814 L22.625,24.9814 Z M12.625,24.9814 L12.625,23.7319 L11.375,23.7319 L11.375,24.9814 L12.625,24.9814 Z M10.125,15.026 L10.125,16.2314 L23.875,16.2314 L23.875,15.026 L17,11.2617 L10.125,15.026 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#E50082\\\" fill-rule=\\\"nonzero\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M23.875,23.9814 L26.375,23.9814 L26.375,26.4814 L7.625,26.4814 L7.625,23.9814 L10.1254,23.9814 L10.1254,22.1069 L9.5,19.7588 L10.7125,19.4551 L11.2194,21.4819 L13.25,21.4819 C13.595,21.4819 13.875,21.7619 13.875,22.1069 L13.875,23.9814 L15.75,23.9814 L15.75,17.7314 L7.625,17.7314 L7.625,12.7313 L16.9988,7.10645 L26.375,12.7313 L26.375,17.7314 L18.25,17.7314 L18.25,23.9814 L20.125,23.9814 L20.125,22.1069 C20.125,21.7619 20.405,21.4819 20.75,21.4819 L22.7619,21.4819 L23.2687,19.4551 L24.4813,19.7588 L23.875,22.1069 L23.875,23.9814 Z M22.625,23.9814 L22.625,22.7319 L21.375,22.7319 L21.375,23.9814 L22.625,23.9814 Z M12.625,23.9814 L12.625,22.7319 L11.375,22.7319 L11.375,23.9814 L12.625,23.9814 Z M10.125,14.026 L10.125,15.2314 L23.875,15.2314 L23.875,14.026 L17,10.2617 L10.125,14.026 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Schoon\",\"color\":\"#004699\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#004699\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.975586 C26.3917,0.975586 34,8.50991 34,17.8103 C34,30.5005 19.3587,43.447 18.7259,43.9597 L17,45.4694 L15.2741,43.9597 C14.6413,43.447 0,30.5005 0,17.8103 C0,8.51134 7.60829,0.975586 17,0.975586 Z\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M19.6777,7.97559 L19.6777,10.47559 L24.6777,10.47559 L24.6777,12.97559 L23.4277,12.97559 L23.4277,27.97559 L9.67773,27.97559 L9.67773,12.97559 L8.42773,12.97559 L8.42773,10.47559 L13.4277,10.47559 L13.4277,7.97559 L19.6777,7.97559 Z M20.9277,12.9756 L12.1777,12.9756 L12.1777,25.4756 L20.9277,25.4756 L20.9277,12.9756 Z M14.6777,15.4756 L14.6777,22.9756 L13.4402,22.9756 L13.4402,15.4756 L14.6777,15.4756 Z M17.1777,15.4756 L17.1777,22.9756 L15.9277,22.9756 L15.9277,15.4756 L17.1777,15.4756 Z M19.6777,15.4756 L19.6777,22.9756 L18.4402,22.9756 L18.4402,15.4756 L19.6777,15.4756 Z M18.4277,9.22559 L14.6777,9.22559 L14.6777,10.4756 L18.4277,10.4756 L18.4277,9.22559 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#004699\\\" fill-rule=\\\"nonzero\\\"/>    <path fill=\\\"#FFF\\\" d=\\\"M19.6777,6.97559 L19.6777,9.47559 L24.6777,9.47559 L24.6777,11.97559 L23.4277,11.97559 L23.4277,26.97559 L9.67773,26.97559 L9.67773,11.97559 L8.42773,11.97559 L8.42773,9.47559 L13.4277,9.47559 L13.4277,6.97559 L19.6777,6.97559 Z M20.9277,11.9756 L12.1777,11.9756 L12.1777,24.4756 L20.9277,24.4756 L20.9277,11.9756 Z M14.6777,14.4756 L14.6777,21.9756 L13.4402,21.9756 L13.4402,14.4756 L14.6777,14.4756 Z M17.1777,14.4756 L17.1777,21.9756 L15.9277,21.9756 L15.9277,14.4756 L17.1777,14.4756 Z M19.6777,14.4756 L19.6777,21.9756 L18.4402,21.9756 L18.4402,14.4756 L19.6777,14.4756 Z M18.4277,8.22559 L14.6777,8.22559 L14.6777,9.47559 L18.4277,9.47559 L18.4277,8.22559 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Groen\",\"color\":\"#00A03C\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <defs>    <path id=\\\"marker_groen-a\\\" d=\\\"M9.1246,0.9692 C9.8227,1.31203 10.2745,2.00713 10.3101,2.77763 L10.3121,2.9067 L10.3121,3.3442 C11.3621,3.50045 12.1359,4.4073 12.1246,5.4692 C12.1527,5.8404 12.0652,6.2117 11.8746,6.5317 C12.4869,6.8803 12.9267,7.4646 13.0947,8.1445 L13.1246,8.2817 L13.1246,8.6567 C13.1484,9.6961 12.5265,10.6423 11.5621,11.0317 C11.3344,11.1603 11.0774,11.2269 10.8173,11.2255 L10.6871,11.2192 L10.6246,11.2192 C10.0036,11.1954 9.4161,10.9415 8.974,10.5095 L8.8746,10.4067 L8.7496,10.4067 L8.7496,17.9692 L11.8746,17.9692 L11.8746,16.0942 L11.2496,13.7192 L12.4371,13.4692 L12.9996,15.4692 L14.9996,15.4692 C15.1709,15.4486 15.3421,15.5079 15.464,15.6298 C15.5684,15.7343 15.627,15.875 15.6286,16.021 L15.6246,16.0942 L15.6246,17.9692 L19.9996,17.9692 L19.9996,20.4692 L0.03711,20.4692 L0.03711,17.9692 L7.4996,17.9692 L7.4996,10.4692 L7.3746,10.4692 C6.939,10.8829 6.3709,11.125 5.7743,11.1539 L5.6246,11.1567 L5.5621,11.1567 C5.2584,11.1848 4.9527,11.1192 4.6871,10.9692 C3.7629,10.596 3.1533,9.7115 3.125,8.7236 L3.1246,8.2192 C3.2646,7.4811 3.7215,6.8411 4.3746,6.4692 C4.1965,6.1673 4.1096,5.8198 4.1246,5.4692 C4.1138,4.4467 4.8309,3.56784 5.8216,3.36462 L5.9371,3.3442 L5.9371,2.9067 C5.9252,2.08545 6.3877,1.33107 7.1246,0.9692 C7.7677,0.71795 8.4815,0.71795 9.1246,0.9692 Z M14.3746,16.7192 L13.1246,16.7192 L13.1246,17.9692 L14.3746,17.9692 L14.3746,16.7192 Z\\\"/>  </defs>  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#00A03C\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.469238 C26.3917,0.469238 34,8.00356 34,17.304 C34,29.9941 19.3587,42.9406 18.7259,43.4534 L17,44.9631 L15.2741,43.4534 C14.6413,42.9406 0,29.9941 0,17.304 C0,8.00499 7.60829,0.469238 17,0.469238 Z\\\"/>    <g transform=\\\"translate(7 6)\\\">      <mask id=\\\"marker_groen-b\\\" fill=\\\"#fff\\\">        <use xlink:href=\\\"#marker_groen-a\\\"/>      </mask>      <polygon fill=\\\"#FFF\\\" points=\\\".037 20.469 20.062 20.469 20.062 .744 .037 .744\\\" mask=\\\"url(#marker_groen-b)\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <defs>    <path id=\\\"label_groen-a\\\" d=\\\"M9.1246,0.9692 C9.8227,1.31203 10.2745,2.00713 10.3101,2.77763 L10.3121,2.9067 L10.3121,3.3442 C11.3621,3.50045 12.1359,4.4073 12.1246,5.4692 C12.1527,5.8404 12.0652,6.2117 11.8746,6.5317 C12.4869,6.8803 12.9267,7.4646 13.0947,8.1445 L13.1246,8.2817 L13.1246,8.6567 C13.1484,9.6961 12.5265,10.6423 11.5621,11.0317 C11.3344,11.1603 11.0774,11.2269 10.8173,11.2255 L10.6871,11.2192 L10.6246,11.2192 C10.0036,11.1954 9.4161,10.9415 8.974,10.5095 L8.8746,10.4067 L8.7496,10.4067 L8.7496,17.9692 L11.8746,17.9692 L11.8746,16.0942 L11.2496,13.7192 L12.4371,13.4692 L12.9996,15.4692 L14.9996,15.4692 C15.1709,15.4486 15.3421,15.5079 15.464,15.6298 C15.5684,15.7343 15.627,15.875 15.6286,16.021 L15.6246,16.0942 L15.6246,17.9692 L19.9996,17.9692 L19.9996,20.4692 L0.03711,20.4692 L0.03711,17.9692 L7.4996,17.9692 L7.4996,10.4692 L7.3746,10.4692 C6.939,10.8829 6.3709,11.125 5.7743,11.1539 L5.6246,11.1567 L5.5621,11.1567 C5.2584,11.1848 4.9527,11.1192 4.6871,10.9692 C3.7629,10.596 3.1533,9.7115 3.125,8.7236 L3.1246,8.2192 C3.2646,7.4811 3.7215,6.8411 4.3746,6.4692 C4.1965,6.1673 4.1096,5.8198 4.1246,5.4692 C4.1138,4.4467 4.8309,3.56784 5.8216,3.36462 L5.9371,3.3442 L5.9371,2.9067 C5.9252,2.08545 6.3877,1.33107 7.1246,0.9692 C7.7677,0.71795 8.4815,0.71795 9.1246,0.9692 Z M14.3746,16.7192 L13.1246,16.7192 L13.1246,17.9692 L14.3746,17.9692 L14.3746,16.7192 Z\\\"/>  </defs>  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#00A03C\\\" fill-rule=\\\"nonzero\\\"/>    <g transform=\\\"translate(7 6)\\\">      <mask id=\\\"label_groen-b\\\" fill=\\\"#fff\\\">        <use xlink:href=\\\"#label_groen-a\\\"/>      </mask>      <polygon fill=\\\"#FFF\\\" points=\\\".037 20.469 20.062 20.469 20.062 .744 .037 .744\\\" mask=\\\"url(#label_groen-b)\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Geluid\",\"color\":\"#FF9100\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" transform=\\\"translate(0 -1)\\\">    <path fill=\\\"#FF9100\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.962891 C26.3917,0.962891 34,8.49722 34,17.7976 C34,30.4878 19.3587,43.4343 18.7259,43.947 L17,45.4567 L15.2741,43.947 C14.6413,43.4343 0,30.4878 0,17.7976 C0,8.49864 7.60829,0.962891 17,0.962891 Z\\\"/>    <path fill=\\\"#000\\\" d=\\\"M21.375,7.96289 L21.375,15.2191 C22.501,15.6081 23.2565,16.6684 23.2565,17.8598 C23.2565,19.0511 22.501,20.1114 21.375,20.5004 L21.375,27.7629 L14.8625,24.2691 L11.6375,27.4941 L9.86875,25.7254 L12.5563,23.0379 L11.6438,22.5504 L7,22.5504 L7,13.1754 L11.6438,13.1754 L21.375,7.96289 Z M18.875,12.1379 L13.25,15.1504 L13.25,20.5754 L18.875,23.5879 L18.875,12.1379 Z M24.3115,19.9105 L26.2229,21.746 L25.3571,22.6476 L23.4457,20.8121 L24.3115,19.9105 Z M12,15.6754 L9.5,15.6754 L9.5,20.0504 L12,20.0504 L12,15.6754 Z M27,17.2379 L27,18.4879 L24.5,18.4879 L24.5,17.2379 L27,17.2379 Z M25.3456,13.0055 L26.2295,13.8894 L24.3158,15.803 L23.432,14.9191 L25.3456,13.0055 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#FF9100\\\" fill-rule=\\\"nonzero\\\"/>    <path fill=\\\"#000\\\" d=\\\"M21.375,6.96289 L21.375,14.2191 C22.501,14.6081 23.2565,15.6684 23.2565,16.8598 C23.2565,18.0511 22.501,19.1114 21.375,19.5004 L21.375,26.7629 L14.8625,23.2691 L11.6375,26.4941 L9.86875,24.7254 L12.5563,22.0379 L11.6438,21.5504 L7,21.5504 L7,12.1754 L11.6438,12.1754 L21.375,6.96289 Z M18.875,11.1379 L13.25,14.1504 L13.25,19.5754 L18.875,22.5879 L18.875,11.1379 Z M24.3115,18.9105 L26.2229,20.746 L25.3571,21.6476 L23.4457,19.8121 L24.3115,18.9105 Z M12,14.6754 L9.5,14.6754 L9.5,19.0504 L12,19.0504 L12,14.6754 Z M27,16.2379 L27,17.4879 L24.5,17.4879 L24.5,16.2379 L27,16.2379 Z M25.3456,12.0055 L26.2295,12.8894 L24.3158,14.803 L23.432,13.9191 L25.3456,12.0055 Z\\\"/>  </g></svg>\",\"width\":34,\"height\":34}},\n        {\"name\":\"Overig\",\"color\":\"#A00078\",\"mapicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"34\\\" height=\\\"45\\\" viewBox=\\\"0 0 34 45\\\">  <defs>    <path id=\\\"marker_overig-a\\\" d=\\\"M4.25,12.207 L4.25,15.957 L0.5,15.957 L0.5,12.207 L4.25,12.207 Z M9.875,12.207 L9.875,15.957 L6.125,15.957 L6.125,12.207 L9.875,12.207 Z M15.5,12.207 L15.5,15.957 L11.75,15.957 L11.75,12.207 L15.5,12.207 Z M4.25,6.582 L4.25,10.332 L0.5,10.332 L0.5,6.582 L4.25,6.582 Z M9.875,6.582 L9.875,10.332 L6.125,10.332 L6.125,6.582 L9.875,6.582 Z M15.5,6.582 L15.5,10.332 L11.75,10.332 L11.75,6.582 L15.5,6.582 Z M4.25,0.95703 L4.25,4.707 L0.5,4.707 L0.5,0.95703 L4.25,0.95703 Z M9.875,0.95703 L9.875,4.707 L6.125,4.707 L6.125,0.95703 L9.875,0.95703 Z M15.5,0.95703 L15.5,4.707 L11.75,4.707 L11.75,0.95703 L15.5,0.95703 Z\\\"/>  </defs>  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <path fill=\\\"#A00078\\\" fill-rule=\\\"nonzero\\\" d=\\\"M17,0.457031 C26.3917,0.457031 34,7.99136 34,17.2918 C34,29.9819 19.3587,42.9284 18.7259,43.4411 L17,44.9509 L15.2741,43.4411 C14.6413,42.9284 0,29.9819 0,17.2918 C0,7.99278 7.60829,0.457031 17,0.457031 Z\\\"/>    <g transform=\\\"translate(9 9)\\\">      <mask id=\\\"marker_overig-b\\\" fill=\\\"#fff\\\">        <use xlink:href=\\\"#marker_overig-a\\\"/>      </mask>      <polygon fill=\\\"#FFF\\\" points=\\\".438 15.982 15.512 15.982 15.512 .907 .438 .907\\\" mask=\\\"url(#marker_overig-b)\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":45,\"anchor\":[17,45]},\"listicon\":{\"html\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"34\\\" height=\\\"34\\\" viewBox=\\\"0 0 34 34\\\">  <defs>    <path id=\\\"label_overig-a\\\" d=\\\"M4.25,12.207 L4.25,15.957 L0.5,15.957 L0.5,12.207 L4.25,12.207 Z M9.875,12.207 L9.875,15.957 L6.125,15.957 L6.125,12.207 L9.875,12.207 Z M15.5,12.207 L15.5,15.957 L11.75,15.957 L11.75,12.207 L15.5,12.207 Z M4.25,6.582 L4.25,10.332 L0.5,10.332 L0.5,6.582 L4.25,6.582 Z M9.875,6.582 L9.875,10.332 L6.125,10.332 L6.125,6.582 L9.875,6.582 Z M15.5,6.582 L15.5,10.332 L11.75,10.332 L11.75,6.582 L15.5,6.582 Z M4.25,0.95703 L4.25,4.707 L0.5,4.707 L0.5,0.95703 L4.25,0.95703 Z M9.875,0.95703 L9.875,4.707 L6.125,4.707 L6.125,0.95703 L9.875,0.95703 Z M15.5,0.95703 L15.5,4.707 L11.75,4.707 L11.75,0.95703 L15.5,0.95703 Z\\\"/>  </defs>  <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">    <circle cx=\\\"17\\\" cy=\\\"17\\\" r=\\\"17\\\" fill=\\\"#A00078\\\" fill-rule=\\\"nonzero\\\"/>    <g transform=\\\"translate(9 9)\\\">      <mask id=\\\"label_overig-b\\\" fill=\\\"#fff\\\">        <use xlink:href=\\\"#label_overig-a\\\"/>      </mask>      <polygon fill=\\\"#FFF\\\" points=\\\".438 15.982 15.512 15.982 15.512 .907 .438 .907\\\" mask=\\\"url(#label_overig-b)\\\"/>    </g>  </g></svg>\",\"width\":34,\"height\":34}},\n      ],\n      areas: [\n        //{ name: \"Heel West\",\n        //  value: \"Heel West\",\n        //  polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n        //{ name: \"De Baarsjes\",\n        //  value: \"De Baarsjes\",\n        //  polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n        //{ name: \"Oud West\",\n        //  value: \"Oud West\",\n        //  polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      ],\n      titleField: 'title',\n      summaryField: 'summary',\n      typeField: self.config.typeField || 'extraData.theme',\n      areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n      },\n\t\t};\n\t\tself.config = Object.assign(self.defaultConfig, props.config, self.config || {})\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n    self.config.map = self.config.map || {};\n    self.config.map.onMapClick = self.config.map.onMapClick || self.onMapClick.bind(self);\n    self.config.map.onMarkerClick = self.config.map.onMarkerClick || self.onMarkerClick.bind(self);\n    self.config.map.clustering = self.config.map.clustering || {};\n    self.config.map.clustering.onClusterClick = self.config.map.clustering.onClusterClick || self.onClusterClick.bind(self);\n    this.config.map.autoZoomAndCenter = 'polygon';\n    // Todo: configurabel\n    self.config.map.polygon = [ { lng: 4.8923325, lat: 52.3578818 }, { lng: 4.8922574, lat: 52.3574723 }, { lng: 4.8920697, lat: 52.3574854 }, { lng: 4.8919410, lat: 52.3567908 }, { lng: 4.8906860, lat: 52.3568661 }, { lng: 4.8904125, lat: 52.3552313 }, { lng: 4.8928991, lat: 52.3556621 }, { lng: 4.8928025, lat: 52.3558538 }, { lng: 4.8930225, lat: 52.3558964 }, { lng: 4.8931164, lat: 52.3557162 }, { lng: 4.8953144, lat: 52.3562174 }, { lng: 4.8971003, lat: 52.3566958 }, { lng: 4.8969823, lat: 52.3568498 }, { lng: 4.8971968, lat: 52.3569055 }, { lng: 4.8973095, lat: 52.3567646 }, { lng: 4.8985805, lat: 52.3571577 }, { lng: 4.8984679, lat: 52.3572757 }, { lng: 4.8986020, lat: 52.3573281 }, { lng: 4.8985215, lat: 52.3575247 }, { lng: 4.8983499, lat: 52.3574952 }, { lng: 4.8982480, lat: 52.3574985 }, { lng: 4.8982748, lat: 52.3574362 }, { lng: 4.8972826, lat: 52.3571512 }, { lng: 4.8931691, lat: 52.3574493 }, { lng: 4.8932067, lat: 52.3576099 }, { lng: 4.8931262, lat: 52.3576131 }, { lng: 4.8931584, lat: 52.3578228 }, { lng: 4.8923325, lat: 52.3578810 } ]\n    \n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n    }\n    \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // when the map is ready\n\t\tself.map.instance.addEventListener('mapIsReady', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n\t\tdocument.addEventListener('areaFilterUpdate', function(event) {\n      self.onChangeAreaFilter(event.detail.value);\n    });\n\n    // handle infoblock changes\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('closeSelectedLocation', function(event) {\n      self.onCloseSelectedLocation(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('newIdeaClick', function(event) {\n      self.onNewIdeaClick();\n    });\n\t\tdocument.addEventListener('clickMobileSwitcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('ideaLiked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('reactionStored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('reactionDeleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('editIdeaClick', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('ideaDeleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArguments=1&includeUser=1`;\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        showIdeaDetails = showIdeaDetails || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.setState({ ideas }, function () {\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers(self.map.markers)\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          self.onChangeMapBoundaries();\n          // dev form\n          //if (!showIdeaSelected) {\n\t\t\t\t\t//  self.setSelectedIdea(null);\n\t\t\t\t\t//  self.setNewIdea({ location: { coordinates: [52.37104644463586, 4.900402911007405] }, title: \"Rutrum tincidunt\", type: \"Kans\", theme: \"Overig\", summary: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat.\", description: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat. maecenas tempus tempor eros. donec a justo. curabitur tellus. pellentesque risus. fusce at arcu. ut lacinia mi vel lectus. phasellus imperdiet. fusce luctus lacus a odio. in et turpis at libero tristique vulputate. sed varius ipsum. suspendisse potenti. suspendisse potenti. donec tempus arcu quis metus.\"});\n\t\t\t\t\t//  self.showIdeaForm();\n          //}\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    // self.infoblock.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers(self.map.markers)\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n    self.setState({ status: 'idea-form', editIdea: idea }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: idea && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n      if (next) next();\n    });\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      console.log(self.state.editIdea);\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      console.log(idea);\n      self.showIdeaDetails(idea)\n    } else {\n      self.setState({ status: 'location-selected' }, function() {\n        // todo: dit zou hij zelf via state moeten doen\n        self.map.map.invalidateSize();\n        self.map.showMarkers(self.map.markers)\n        self.setNewIdea(self.state.editIdea)\n      });\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas\n\t\tthis.state.ideas.forEach((idea) => {\n\t\t\tlet title = eval(`idea.${self.config.titleField}`) || '';\n      let titlelLc = title.toLowerCase();\n\t\t\tlet summary = eval(`idea.${self.config.summaryField}`) || '';\n      let summaryLc = summary.toLowerCase();\n\t\t\tif (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\tsearchResult.ideas.push({\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonClick: function() {\n            self.onUpdateSelectedIdea(idea)\n          },\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n    \n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\t\t\n\t}\n\n  setCurrentPolygon(polygon) {\n    let state = { ...this.state };\n    state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n    this.setState(state);\n  }\n\n  removeCurrentPolygon() {\n    this.map.removePolygon(this.state.currentPolygon)\n    let state = { ...this.state };\n    state.currentPolygon = undefined;\n    this.setState(state);\n  }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    let self = this;\n    self.map.setSelectedLocation(location)\n    if (self.ideaform) {\n      if (!location) return;\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\tself.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\tlet address = json && json._display || 'Geen adres gevonden';\n\t\t\t\tself.state.editIdea.address = address;\n\t\t\t\tself.ideaform.handleLocationChange({ location, address: address });\n\t\t\t})\n    }\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infoblock) {\n          self.setState({ editIdea: self.state.editIdea });\n          self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n          self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n            let address = json && json._display || 'Geen adres gevonden';\n            let editIdea = self.state.editIdea;\n            editIdea.address = address;\n            self.setState({ editIdea });\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address });\n          })\n          //self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n          self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        self.setSelectedLocation(null);\n        if (self.infoblock) {\n          self.infoblock.setNewIdea(null);\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(idea);\n        // this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        this.infoblock.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(null);\n        this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n        } else {\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n          // setTimeout( function() {\n\t\t      // var event = new CustomEvent('newIdeaClick', { detail: { newIdea } });\n\t\t      //   document.dispatchEvent(event);\n          // }, 500 );\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.setSelectedIdea(null);\n          this.setSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.setSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infoblock) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infoblock) {\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n\tonCloseSelectedLocation() {\n    this.setState({ ...this.state, status: 'default', currentIdea: null }, function() {\n      this.setSelectedIdea(null);\n      this.setNewIdea(null);\n      this.setSelectedLocation(null);\n    });\n  }\n  \n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      this.showIdeaDetails(idea);\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n        console.log('xxx', json);\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n        console.log(address);\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter(self.config.map.polygon || self.map.markers);\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick(idea) {\n    this.showIdeaDetails(idea);\n  };\n  \n  onNewIdeaClick() {\n    let self = this;\n    self.showIdeaForm(this.state.editIdea, () => {\n      let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n        console.log('xxx', json);\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n        console.log(address);\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeTypeFilter(value) {\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`) && eval(`marker.data.${self.config.typeField}`) == value;\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  onChangeAreaFilter(area) {\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.removeCurrentPolygon();\n    self.setCurrentPolygon( area && area.polygon );\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  }\n\n  onClickMobileSwitcher() {\n    let self = this;\n    self.infoblock.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter([{ lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }]);\n      }\n    })\n  }\n  \n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infoblock moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        let config = { // TODO: niet bij elke render\n          titleField: this.config.titleField,\n          summaryField: this.config.summaryField,\n          typeField: this.config.typeField,\n          areaField: this.config.areaField,\n          siteId: this.config.siteId,\n          user: this.config.user,\n          api: this.config.api,\n          argument: this.config.argument,\n          labels: {\n            Kans: { text: 'Dit gaat goed', color: 'black', backgroundColor: '#bed200' },\n            Knelpunt: { text: 'Dit kan beter', color: 'black', backgroundColor: '#ff9100' },\n          }\n        };\n        infoHTML = (\n\t\t\t    <IdeaDetails id={this.divId + '-infoblock'} config={config} idea={this.state.currentIdea} label={this.state.currentIdea.extraData.type} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideadetails = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaDetails()}>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <IdeaForm id={this.divId + '-infoblock'} config={{ siteId: this.config.siteId, user: this.config.user, api: this.config.api, ...this.config.idea }} idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideaform = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n            let buttonHTML = this.config.api.isUserLoggedIn\n                ? (<button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>)\n                : (<div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\">inloggen</a>.</div>);\n            mobilePopupHTML = (\n              <div className=\"ocs-mobile-popup\">\n                Een locatie vlakbij\n                <h4>{this.state.editIdea && this.state.editIdea.address}</h4>\n                {buttonHTML}\n              </div>\n            );\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infoblock.setState({ mobileState: 'opened' }); this.showIdeaDetails(this.state.currentIdea) } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className=\"osc-ideas-on-map-map\">\n\t\t\t\t  <Map id={this.divId + '-map'} className=\"\" config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField }} ref={el => (this.map = el)}/>\n        </div>\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport IdeasList from './ideas-list.jsx';\n\n// TODO: na verandering op verandering denk ik dat dit een status moet gaan krijgen ipv. de new en selected versie.\n// TODO: setNewIdea refactoren naar setSelectedLocation\n// TODO: events worden via document gestuurd; dat kan ook intern\n\n'use strict';\n\nexport default class InfoBlock extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    this.eventTarget = this.config.eventTarget || this.instance;\n  }\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list.updateIdeas({ ideas, sortOrder, showSortButton, center, maxLength });\n  }\n\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchUpdateSelectedIdea(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('updateSelectedIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchCloseSelectedLocation(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('closeSelectedLocation', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchSelectedIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('selectedIdeaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchNewIdeaClick(e) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('newIdeaClick', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new CustomEvent('clickMobileSwitcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n\trender() {\n\n    let self = this;\n\n    let newIdeaHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // new idea\n    if (self.state.newIdea) {\n      if (self.state.newIdea.isPointInPolygon) {\n        let button = null;\n        if (self.config.api.isUserLoggedIn) {\n          button = (\n            <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)} ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n          );\n        } else {\n          button = (\n            <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n          );\n        }\n        newIdeaHTML = (\n\t\t\t    <div className=\"osc-info-block-new-idea\">\n            <button className=\"osc-close-button\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n            <p><strong>Geselecteerd:</strong> Een locatie vlakbij <strong>{self.state.newIdea.address}</strong></p>\n              {/* <h4>{self.state.newIdea.location.coordinates[0]},{self.state.newIdea.location.coordinates[1]}</h4> */}\n              <p>Op deze locatie is nog geen punt ingestuurd. Maar misschien heeft een medebewoner wel een vergelijkbare melding gedaan in de omgeving waaraan u kunt bijdragen. Bekijk daarom eerst de inzendingen in onderstaande lijst. Wilt u een nieuw punt toevoegen? Klik dan hier:</p>\n              {button}\n          </div>\n        );\n      } else {\n        newIdeaHTML = (\n\t\t\t    <div className=\"osc-info-block-new-idea\">\n            <button className=\"osc-close-button\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n            <h3>Geselecteerd</h3>\n            <p>U heeft een locatie geselecteerd buiten het begrensde gebied. U kunt via deze website geen melding op deze locatie inzenden.</p>\n            <p>Wilt u melden wat er goed is of wat er beter kan in de omliggende straten en pleinen? Dan horen we dit graag van u via e-mail. Klik daarvoor op de link hieronder of stuur direct een e-mail naar gerarddoubuurt@amsterdam.nl.</p>\n            <a className=\"osc-link\" href=\"mailto: gerarddoubuurt@amsterdam.nl\">Stuur een e-mail</a>\n          </div>\n        );\n      }\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      let idea = self.state.selectedIdea;\n      let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme);\n      if (!typeDef) { typeDef = { listicon: { html: '' } }; console.log(idea.extraData.theme + ' niet gevonden'); }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.state.selectedIdea)}>\n          <button className=\"osc-close-button\" onClick={(event) => self.dispatchUpdateSelectedIdea(event, null)} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-info-block-selected-idea-idea\">\n            <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                <div className=\"osc-likes\">\n                  {idea.yes || 0}\n                </div>\n                <div className=\"osc-reactions\">\n                  {idea.argCount || 0}\n                </div>\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    let defaultBlockHTML = null;\n    if (!newIdeaHTML && !selectedIdeaHTML) {\n      defaultBlockHTML = (\n\t\t\t  <div className=\"osc-info-block-default-block\">\n          <div className=\"osc-info-block-default-block-line osc-line-1\">\n            Klik op een plek op de kaart om een nieuw punt toe te voegen.\n          </div>\n          <div className=\"osc-info-block-default-block-line osc-line-2\">\n            Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.\n          </div>\n          <div className=\"osc-info-block-default-block-line osc-line-3\">\n            Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.\n          </div>\n        </div>\n      );\n      mobileTitle = `${self.config.title} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-info-block'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          {defaultBlockHTML}\n          {newIdeaHTML}\n          {selectedIdeaHTML}\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.title + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport OpenStadComponentNLMap from 'openstad-component-nlmap/src/component/map.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n    };\n\t\tthis.config = Object.assign(this.defaultConfig, this.config, props.config || {})\n\n    // defaults\n    this.config.clustering.showCoverageOnHover = typeof this.config.showCoverageOnHover != 'undefined' ? this.config.showCoverageOnHover : false;\n    this.config.clustering.onClusterAnimationEnd = this.config.clustering.onClusterAnimationEnd || this.onClusterAnimationEnd.bind(this);\n    this.config.clustering.maxClusterRadius = 30; // default is 80\n\n    this.ideas = [];\n\n  }\n\n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && eval(`idea.${self.config.typeField}`);\n\t\tlet typeDef = self.config.types.find(entry => entry.name == typename);\n    if (!typeDef) { console.log(typename + ' niet gevonden'); }\n\t\tlet color = typeDef && typeDef.color || 'black';\n    let icondef = typeDef.mapicon || typeDef.icon || { img: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  showMarkers() {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    self.setBoundsAndCenter(self.config.polygon || self.map.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponentFormelement extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttitle: 'Onbekend veld',\n      infoText: null,\n      minChars: null,\n      maxChars: null,\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\t\t// this.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n\t\t\tideaId: this.config.ideaId,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n\trender(elementHTML) {\n\n    let self = this;\n\n    let infoHTML = null;\n    if (self.config.infoText) {\n      infoHTML = (\n\t\t\t\t<div className=\"form-info\">\n  \t\t\t\t{this.config.infoText}\n\t\t\t\t</div>\n      );\n    }\n\n    let charsCounterHTML = null;\n    if (this.config.minChars && this.config.maxChars) {\n      charsCounterHTML = (\n        <div id=\"charsLeftTitle\" className=\"charsLeft\">\n          <div className=\"min error visible\">Nog minimaal <span>2</span> tekens</div>\n          <div className=\"max\">Je hebt nog <span>0</span> tekens over.</div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"osc-form-group\">\n\t\t\t\t<h2>\n\t\t\t\t\t{self.config.title}\n\t\t\t\t</h2>\n        {infoHTML}\n        {charsCounterHTML}\n\t\t\t\t{elementHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport OpenStadComponentFormelement from './formelement.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentImageUpload extends OpenStadComponentFormelement {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config, this.config || {});\n\n    this.state = {\n\t\t\tvalue: this.props.value,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\t}\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar fieldsetElement = document.querySelector('.filepondFieldset2');\n\t\tif (fieldsetElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\tFilePond.setOptions({\n\t\t\t\tserver: '/image'\n\t\t\t});\n\n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 3,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: [],\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: '/image',\n\t\t\t\t\tfetch: '/fetch-image?img='\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(fieldsetElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = JSON.parse(image.serverId)\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.handleFieldChange(self.props.name, self.state.value )\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n  \n\trender() {\n\n    let self = this;\n\n    let inputElement = (\n\t\t\t<fieldset className=\"filepondFieldset2\">\n\t\t\t\t<div className=\"form-warning-container\"><span id=\"form-warning-images\" className=\"form-warning\">Het uploaden van images is nog niet afgerond</span></div>\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n\t\t\t</fieldset>\n    );\n    //   <input value={self.props.value} onChange={ () => self.props.handleFieldChange(self.props.name, self.formfield.value ) } ref={ el => self.formfield = el }></input>\n\n    return super.render(inputElement);\n\n  }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nexport default class OpenStadComponentFormfieldsInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\n\t\tself.config = Object.assign(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value.length,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate() {\n\t\tlet state = { ...this.state };\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `Je ${this.config.name} is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `Je ${this.config.name} is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tstate.showWarning = true;\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n\t}\n\n\tshowWarning() {\n\t\tlet state = { ...this.state };\n\t\tstate.showWarning = true;\n\t\tthis.setState(state)\n\t}\n\n\n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\thandleInputFocus() {\n\t\tlet state = { ...this.state };\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\thandleInputBlur() {\n\t\tlet state = { ...this.state };\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\thandleInputKeyUp() {\n\t\tlet state = {};\n\t\tlet valueLength = this.input.value.length;\n\t\tstate.value = this.input.value;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning-theme'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea ref={el => (self.input = el)} value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.handleInputKeyUp(e)} onFocus={e => self.handleInputFocus(e)} onBlur={e => self.handleInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input ref={el => (self.input = el)} value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.handleInputKeyUp(e)} onFocus={e => self.handleInputFocus(e)} onBlur={e => self.handleInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponentLibs from 'openstad-component-libs/src/index.jsx';\nimport OpenStadComponentFormelementsInputWithCounter from '../openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-reaction-form-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n\t\t};\n\n\t\tself.config = merge.recursive(self.defaultConfig, props.config || {})\n\n    self.state = {\n      description: self.config.description || '',\n\t\t};\n\n  }\n\n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t}\n\n  isUserLoggedIn() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.config.user && this.config.user.role;\n    return this.config.api.isUserLoggedIn && \n      (( requiredUserRole == 'anonymous' && userRole ) ||\n       ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n       ( requiredUserRole == 'admin' && userRole == 'admin' ));\n      }\n\n\tsubmitForm() {\n\n\t\tlet self = this;\n\n\t\tlet isValid = self.description.validate();\n\t\tif (!isValid) return;\n\n\t  if (!self.isUserLoggedIn()) return alert('Je bent niet ingelogd');\n\n\t\tlet url = ( self.config.api && self.config.api.url ) + \"/api/site/\" + self.config.siteId + \"/idea/\" + self.config.ideaId + \"/argument\" + ( self.config.argumentId ? '/' + self.config.argumentId : ''  );\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n    let method = self.config.argumentId ? 'PUT' : 'POST';\n\n\t\tlet body = {\n\t\t\tsentiment: self.config.sentiment,\n\t\t\tdescription: self.state.description,\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod,\n      headers,\n\t\t\tbody: JSON.stringify(body),\n\t\t})\n\t\t\t.then( function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t\tthrow response.text();\n\t\t\t})\n\t\t\t.then(function (json) {\n\n\t\t\t\tif (typeof self.config.onSubmit == 'function') {\n\t\t\t\t\tself.config.onSubmit({ description: self.state.description });\n\t\t\t\t}\n\n        self.setState({ description: '' }, () => {\n\t\t      var event = new CustomEvent('reactionStored', { detail: json });\n\t\t      document.dispatchEvent(event);\n        });\n\n\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\terror.then(function (messages) { return console.log(messages)} );\n\t\t\t});\n\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet config = {\n\t\t\tdescriptionMinLength: self.config.descriptionMinLength || 30,\n\t\t\tdescriptionMaxLength: self.config.descriptionMaxLength || 500,\n\t\t}\n\n    // todo: config of je ingelogd moet zijn\n    let submitButtonHTML = (\n      <div className=\"osc-align-right-container\">\n        <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n      </div>\n    );\n    if (self.isUserLoggedIn()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={e => self.submitForm()} className=\"osc-button-blue\" disabled={ self.state.isValid ? true : null }>Verzenden</button>\n        </div>\n      );\n    }\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className=\"osc-reaction-form osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <div className=\"osc-form-group\">\n\t\t\t\t  <OpenStadComponentFormelementsInputWithCounter ref={el => (self.input = el)} disabled={this.isUserLoggedIn() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ (data) => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        </div>\n        {submitButtonHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponentReactionForm from './openstad-component-reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tvar self = this;\n\t\tself.id = props.id || 'osc-reaction-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n\t\t\ttitle: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n\t\t};\n\n\t\tself.config = Object.assign(self.defaultConfig, props.config || {})\n\n    self.state = {\n\t\t\tid: props.data.id,\n\t\t\tuserId: props.data.userId,\n\t\t\tdescription: props.data.description,\n\t\t\tuser: props.data.user,\n\t\t\tsentiment: props.data.sentiment,\n\t\t\thasUserVoted: props.data.hasUserVoted,\n\t\t\tyes: props.data.yes,\n\t\t\tcan: props.data.can,\n\t\t\treactions: props.data.reactions || [],\n\t\t\tcreateDateHumanized: props.data.createDateHumanized,\n      isMenuActive: false,\n      editMode: false,\n\t\t};\n\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true })\n  }\n\n  showEditForm(what) {\n    this.setState({ editMode: what });\n  }\n\n  onSubmit(data) {\n    data = data || {};\n    this.setState({ editMode: false, description: data.description });\n  }\n\n  submitDelete() {\n\n\t\tlet self = this;\n\n\t\tlet url = ( self.config.api && self.config.api.url ) + '/api/site/' + self.config.siteId + '/idea/' + self.config.ideaId + '/argument/' + self.state.id;\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { 'Content-type': 'application/json' });\n\n\t\tlet body = {};\n\n\t\tfetch(url, {\n\t\t\tmethod: 'DELETE',\n      headers,\n\t\t\tbody: JSON.stringify(body),\n\t\t})\n\t\t\t.then( function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t\tthrow response.text();\n\t\t\t})\n\t\t\t.then(function (json){\n        self.setState({ isDeleted: true });\n\n\t\t    var event = new CustomEvent('reactionDeleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\terror.then(function (messages) { return console.log(messages)} );\n\t\t\t});\n\n  }\n\n  submitLike() {\n\n\t\tlet self = this;\n\n\t  if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t\tlet url = ( self.config.api && self.config.api.url ) + '/api/site/' + self.config.siteId + '/idea/' + self.config.ideaId + '/argument/' + self.state.id + '/vote';\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { 'Content-type': 'application/json' });\n\n\t\tlet body = {};\n\n\t\tfetch(url, {\n\t\t\tmethod: 'POST',\n      headers,\n\t\t\tbody: JSON.stringify(body),\n\t\t})\n\t\t\t.then( function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t\tthrow response.text();\n\t\t\t})\n\t\t\t.then(function (json){\n        self.setState({ ...json });\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\terror.then(function (messages) { return console.log(messages)} );\n\t\t\t});\n\n  }\n\n\trender() {\n\n\t\tvar self = this;\n\n    if (self.state.isDeleted) return null;\n\n    var menuHTML = null;\n    if ( self.state.can.edit && self.state.can.delete ) {\n      menuHTML =(\n\t\t\t\t<div className={ 'osc-reaction-menu' + ( self.state.isMenuActive ? ' osc-reaction-hamburger-active' : '' ) } onClick={ () => { self.showMenu(); }}>\n\t\t\t\t\t<button className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete() } }/>\n\t\t\t\t\t  <button className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.showEditForm(true) }/>\n\t\t\t\t</div>\n      );\n    }\n\n    // voor nu staat dit uit\n    // let likeButtonHTML = (\n\t\t//   <button className={ 'osc-reaction-like-button' + ( self.state.hasUserVoted ? ' osc-reaction-like-button-hasvoted' : '' ) } onClick={ () => self.submitLike() }>\n\t\t//   \tMee eens (<span>{self.state.yes | 0}</span>)\n    //   </button>\n    // );\n    let likeButtonHTML = null;\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{self.state.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: self.state.description, argumentId: self.state.id, onSubmit: self.onSubmit.bind(self) }} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={`osc-reaction-${self.state.id}`} className=\"osc-reaction\" ref={el => (this.instance = el)} >\n\n        {menuHTML}\n\n        <div className=\"osc-reaction-user\">{self.state.user.nickName || self.state.user.fullName || self.state.user.firstName +' ' + self.state.user.lastName}</div>\n\t\t\t\t<div className=\"osc-reaction-date\">{self.state.createDateHumanized}</div>\n        {descriptionHTML}\n\n        {likeButtonHTML}\n\t\t\t  \n\t\t\t  {/* <a href=\"\" className=\"reply\">Reageren</a> */}\n\t\t\t  \n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponentReactionForm from './openstad-component-reaction-form.jsx';\nimport OpenStadComponentReaction from './openstad-component-reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-reaction-form-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n\t\t\ttitle: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n\t\t};\n\n\t\tself.config = Object.assign(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\treactions: [],\n\t\t};\n\n\t\tself.fetch()\n\t\t\n  }\n\n\tfetch () {\n\n\t\tlet self = this;\n\n\t\tlet url = ( self.config.api && self.config.api.url ) + '/api/site/' + self.config.siteId + '/idea/' + self.config.ideaId + '/argument?sentiment=' + self.config.sentiment + '&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1';\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n\n\t\tfetch(url, { headers })\n\t\t\t.then( function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t\tthrow response.text();\n\t\t\t})\n\t\t\t.then(function (json){\n\n\t\t\t\tlet state = { ...self.state };\n\t\t\t\tstate.reactions = json;\n\t\t\t\tstate.reactions.sort((a, b) => {\n\t\t\t\t\treturn a.createdAt < b.createdAt;\n\t\t\t\t});\n\t\t\t\tself.setState(state)\n\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\terror.then(function (messages) { return console.log(messages)} );\n\t\t\t});\n\n\t}\n\n\thandleOnSubmit() {\n\t\tthis.fetch()\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet reactions =  (\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n\t\t\t\t\tlet key = 'osc-reaction-key-' + ( reaction.id || parseInt( 1000000 * Math.random() ) );\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} data={reaction}/>\n            </li>\n          );\n\n        })}\n\t\t\t</ul>);\n\n\t\tlet title = self.config.title ? (<h3>{self.config.title}</h3>) : null;\n\n\t\tlet config = Object.assign({\n\t\t\tonSubmit: self.handleOnSubmit.bind(this),\n\t\t}, self.config || {});\n\n    return (\n\t\t\t<div id={this.id} className={self.props.className || 'osc-reactions'} ref={el => (this.instance = el)} >\n\n\t\t\t\t{title}\n\n        <OpenStadComponentReactionForm config={config}/>\n\t\t\t\t\n\t\t\t\t{reactions}\n        <br/><br/>\n\t\t\t\t\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n\n\t\t\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult.bind(this));\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    console.log('++', value);\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n\t\t// console.log('update', searchValue, searchResult);\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t\tAdressen:\n          { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t\t<div className=\"osc-search-suggestions-hr\"/>\n\t\t\t\t\t{ this.config.title }:\n          { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder=\"Zoek op trefwoord\" onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport Search from './search.jsx';\n\nimport OpenStadComponentLibs from 'openstad-component-libs/src/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote(new Event('x'));\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n\t\tlet headers = Object.assign(( self.config.api && self.config.api.headers || {} ), { \"Content-type\": \"application/json\" });\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new CustomEvent('ideaLiked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport \"./css/default.less\";\n\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\nexport {OpenStadComponentIdeasOnMap}\n\nif (window.NodeList && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = Array.prototype.forEach;\n}\n\nlet elements = document.querySelectorAll('.openstad-component-ideas-on-map');\nelements.forEach((elem) => {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes}/>, elem)\n})\n","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}